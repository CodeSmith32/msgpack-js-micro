/// micro msgpack library
/// version 1.3.0
/// by Codesmith32
/// https://github.com/CodeSmith32/msgpack-js-micro

!function(r){"use strict";var n="function"==typeof r.Uint8Array&&"function"==typeof r.ArrayBuffer,e="function"==typeof r.Buffer,t="function"==typeof r.BigInt,i=r.Uint8Array||function(){},o=r.ArrayBuffer||function(){},f=r.DataView||function(){},u=r.Buffer||function(){},a=r.BigInt||function(){},c=r.BigInt?{bits:r.BigInt(32),mask:r.BigInt(4294967295)}:{},s=n&&new r.Uint8Array(4),d=n&&new r.Float32Array(s.buffer),g=n&&new r.Uint8Array(8),l=n&&new r.Float64Array(g.buffer),h=n&&1===new Uint32Array(new i([1,0,0,0]).buffer)[0];try{"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/function\s*([^\s(]*)/)[1]}})}catch(r){Function.prototype.name=""}function y(r){if("string"==typeof r)return r;if(e&&r instanceof u)return r.toString("latin1");if(r&&r.constructor&&!(r instanceof i)&&r.constructor.name.match(/^(Big)?(Uint|Int|Float)(8|16|32|64)(Clamped)?Array$/)&&(r=new i(r.buffer,r.byteOffset,r.byteLength)),r instanceof o&&(r=new i(r)),r instanceof f&&(r=new i(r.buffer)),r instanceof i){for(var n="",t=0;t<r.length;t+=128)n+=String.fromCharCode.apply(null,r.subarray(t,t+128));return n}throw new Error("MsgPack Error: Cannot normalize to string for value of type "+typeof r+(r?" "+r.constructor.name:""))}function b(r,t){switch(t){case"buffer":if(e)return u.from(r,"latin1");case"arraybuffer":return function(r){if(!n)throw new Error("MsgPack Error: Requesting ArrayBuffer return in environment that doesn't support TypedArrays or ArrayBuffers");for(var e=new i(r.length),t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer}(r)}return r}Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),[].indexOf||(Array.prototype.indexOf=function(r,n){var e=this.length>>>0;for((n=0|+n||0)<0&&(n+=e);n<e;n++)if(n in this&&this[n]===r)return n;return-1});var p=Math.log,w=p(2),E=p(10),v=(Math.log10,Math.log2||function(r){return p(r)/w}),m=Math.abs,k=Math.floor,x=Math.round,C=Math.pow,A=C(2,149),M=C(2,1022),T=C(2,52);function P(r){var e=this;if(!(e instanceof P))throw new Error("Bad instantiation of object msgpack::BinReader");var t=0;function i(n){if(t+n>r.length)throw new Error("MsgPack Error: Unexpected end of data")}function o(n){return 255&r.charCodeAt(t++)}r=y(r),e.ui8=function(){return i(1),o()},e.i8=function(){i(1);var r=o();return 128&r&&(r|=-256),r},e.ui16=function(){return i(2),256*o()+o()},e.i16=function(){i(2);var r=256*o()+o();return 32768&r&&(r|=-65536),r},e.ui32=function(){return i(4),16777216*o()+65536*o()+256*o()+o()>>>0},e.i32=function(){return i(4),16777216*o()+65536*o()+256*o()+o()>>0},e.ui64=function(r){return r?(a(e.ui32())<<c.bits)+a(e.ui32()):4294967296*e.ui32()+e.ui32()},e.i64=function(r){return(r?a(e.i32())<<c.bits:4294967296*e.i32())+(r?a(e.ui32()):e.ui32())},n?(e.f32=function(){if(i(4),h)for(var r=3;r>=0;r--)s[r]=o();else for(r=0;r<4;r++)s[r]=o();return d[0]},e.f64=function(){if(i(8),h)for(var r=7;r>=0;r--)g[r]=o();else for(r=0;r<8;r++)g[r]=o();return l[0]}):(e.f32=function(){i(4);var r=16777216*o()+65536*o()+256*o()+o(),n=!!(2147483648&r),e=r>>23&255,t=8388607&r;return 255===e?0===t?n?-1/0:1/0:NaN:0===e?t/A:(t+=8388608)*(n?-1:1)*C(2,e-127-23)},e.f64=function(){i(8);var r=16777216*o()+65536*o()+256*o()+o(),n=!!(2147483648&r),e=r>>20&2047,t=4294967296*(1048575&r)+(16777216*o()+65536*o()+256*o()+o());return 2047===e?0===t?n?-1/0:1/0:NaN:0===e?t/M/T:(t/T+1)*(n?-1:1)*C(2,e-1023)}),e.buf=function(n){i(n);var e=r.slice(t,t+n);return t+=n,e},e.eof=function(){return t>=r.length}}function j(){var r=this;if(!(r instanceof j))throw new Error("Bad instantiation of object msgpack::BinWriter");var e="";function t(r){e+=String.fromCharCode(255&r)}r.i8=function(n){return t(n),r},r.i16=function(n){return t(n>>8),t(n),r},r.i32=function(n){return t(n>>24),t(n>>16),t(n>>8),t(n),r},r.i64=function(n){return r.i32(k(n/4294967296)).i32(n),r},n?(r.f32=function(r){if(d[0]=r,h)for(var n=3;n>=0;n--)t(s[n]);else for(n=0;n<4;n++)t(s[n])},r.f64=function(r){if(l[0]=r,h)for(var n=7;n>=0;n--)t(g[n]);else for(n=0;n<8;n++)t(g[n])}):(r.f32=function(n){if(isNaN(n))return e+="À\0\0",r;if(n===1/0)return e+="\0\0",r;if(n===-1/0)return e+="ÿ\0\0",r;if(0===n)return e+="\0\0\0\0",r;var i=n<0,o=i?-n:n,f=k(v(o)),u=x(o*C(2,23-f))-8388608;return f+=127,u>8388607&&(f++,u&=8388607),f>254?(e+=i?"ÿ\0\0":"\0\0",r):(f<=0&&(f=0,u=x(o*A)),t(i<<7|f>>1&127),t(f<<7|u>>16&127),t(u>>8),t(u),r)},r.f64=function(n){if(isNaN(n))return e+="ø\0\0\0\0\0\0",r;if(n===1/0)return e+="ð\0\0\0\0\0\0",r;if(n===-1/0)return e+="ÿð\0\0\0\0\0\0",r;if(0===n)return e+="\0\0\0\0\0\0\0\0",r;var i=n<0,o=i?-n:n,f=k(v(o)),u=x(f>0?o*C(2,52-f):o*C(2,52)*C(2,-f))-4503599627370496;return f+=1023,u>0x80000000000000&&(f++,u-=0x80000000000000),f>2046?(e+=i?"ÿð\0\0\0\0\0\0":"ð\0\0\0\0\0\0",r):(f<=0&&(f=0,u=x(o*M*T)),t(i<<7|f>>4&127),t(f<<4|u/281474976710656&15),t(u/1099511627776),t(u/4294967296),t(u/16777216),t(u/65536),t(u/256),t(u),r)}),r.buf=function(n){return e+=n,r},r.data=function(){return e}}function B(r,n){var e=this;if(!(e instanceof B))throw new Error("Bad instantiation of object msgpack");var i={},o={};e.extend=function(r){var n=r.type,e=r.varType||"object",t=r.encode,f=r.decode,u={enc:t,dec:f,ty:n};if("number"!=typeof n||n<0||n>127)throw new Error("MsgPack Error: Failed to add extension with type code: "+typeof n+" "+ +n);if("function"!=typeof t)throw new Error("MsgPack Error: Failed to add extension; missing 'encode' function");if("function"!=typeof f)throw new Error("MsgPack Error: Failed to add extension; missing 'decode' function");if(n in o)throw new Error("MsgPack Error: Failed to register extension with code "+n+"; extension code already in use");(i[e]=i[e]||[]).push(u),o[n]=u};var f={string:0,buffer:0,arraybuffer:0},u={utf8:0,latin1:0},a={returnType:"string",stringEncoding:"utf8"};e.encode=function(r,n){var e="returnType"in(n=n||{})?n.returnType.toLowerCase():a.returnType,t="stringEncoding"in n?n.stringEncoding.toLowerCase():a.stringEncoding,o=new j,f=[];return function r(n){var e=typeof n;if(e in i)for(var u,a,s=0;s<i[e].length;s++)if(!1!==(a=(u=i[e][s]).enc(n))){if(null==a)throw new Error("MsgPack Error: Extension code "+u.ty+" failed to return a valid buffer");return 1===(a=y(a)).length?o.i8(212):2===a.length?o.i8(213):4===a.length?o.i8(214):8===a.length?o.i8(215):16===a.length?o.i8(216):a.length<256?o.i8(199).i8(a.length):a.length<65536?o.i8(200).i16(a.length):o.i8(201).i32(a.length),void o.i8(u.ty).buf(a)}if("bigint"===e&&n<=4294967295&&(n=Number(n),e="number"),n&&n.constructor.name.match(/^(Big)?(Uint|Int|Float)(8|16|32|64)(Clamped)?Array$|^(ArrayBuffer|Buffer|DataView)$/))(n=y(n)).length<256?o.i8(196).i8(n.length).buf(n):n.length<65536?o.i8(197).i16(n.length).buf(n):o.i8(198).i32(n.length).buf(n);else if(null==n)o.i8(192);else if("boolean"===e)o.i8(194+n);else if("number"===e)k(n)===n?n<0?n>=-32?o.i8(n):n>=-128?o.i8(208).i8(n):n>=-32768?o.i8(209).i16(n):n>=-2147483648?o.i8(210).i32(n):o.i8(211).i64(n):n<128?o.i8(n):n<256?o.i8(204).i8(n):n<65536?o.i8(205).i16(n):n<=4294967295?o.i8(206).i32(n):o.i8(207).i64(n):function(r){r=m(r);var n=v(r);return n<-120||n>120||(r/=C(2,k(n)-23))!==k(r)}(n)?o.i8(203).f64(n):o.i8(202).f32(n);else if("bigint"===e)o.i8(n<0?211:207),o.i32(Number(n>>c.bits)).i32(Number(n&c.mask));else if("string"===e)n="utf8"===t?n.replace(/[\x80-\uffff]/g,function(r){return(r=r.charCodeAt())<2048?String.fromCharCode(192|r>>6,128|63&r):String.fromCharCode(224|r>>12&15,128|r>>6&63,128|63&r)}):function(r){return r.replace(/[\u0100-\uffff]/g,function(r){return String.fromCharCode(255&r.charCodeAt(0))})}(n),n.length<32?o.i8(160|n.length).buf(n):n.length<256?o.i8(217).i8(n.length).buf(n):n.length<65536?o.i8(218).i16(n.length).buf(n):o.i8(219).i32(n.length).buf(n);else{if("object"!==e)throw new Error("MsgPack Error: Failed to encode element of type "+e);if(f.indexOf(n)>-1)throw new Error("MsgPack Error: Failed to encode object with recursive properties");if(f.push(n),Array.isArray(n))for(n.length<16?o.i8(144|n.length):n.length<65536?o.i8(220).i16(n.length):o.i8(221).i32(n.length),s=0;s<n.length;s++)r(n[s]);else{var d=0;for(var s in n)void 0!==n[s]&&d++;for(var s in d<16?o.i8(128|d):d<65536?o.i8(222).i16(d):o.i8(223).i32(d),n)if(void 0!==n[s]&&(r(s),r(n[s]),--d<0))throw new Error("MsgPack Error: Failed to encode malformed Proxy object");if(d)throw new Error("MsgPack Error: Failed to encode malformed Proxy object")}f.pop()}}(r),b(o.data(),e)},e.encode.defaults=function(r){if("string"==typeof r){if(r in a)return a[r];throw new Error("Unknown encode setting name: "+r)}if("object"!=typeof r)throw new Error("Could not set encode defaults with non-object setting input");if("returnType"in r){if("string"!=typeof r.returnType||!(r.returnType in f))throw new Error("MsgPack Error: Invalid encode default value for returnType");a.returnType=r.returnType}if("stringEncoding"in r){if("string"!=typeof r.stringEncoding||!(r.stringEncoding in u))throw new Error("MsgPack Error: Invalid encode default value for stringEncoding");a.stringEncoding=r.stringEncoding}};var s={binaryType:"string",stringEncoding:"utf8",bigInts:!1};e.decode=function(r,n){var e="binaryType"in(n=n||{})?n.binaryType.toLowerCase():s.binaryType,i="stringEncoding"in n?n.stringEncoding.toLowerCase():s.stringEncoding,f=t&&("bigInts"in n?!!n.bigInts:s.bigInts),u=new P(r);function a(r){for(var n={},e=0;e<r;e++)n[h()]=h();return n}function c(r){for(var n=[],e=0;e<r;e++)n.push(h());return n}function d(r){return b(r,e)}function g(r){return"utf8"===i?function(r){return r.replace(/([\xc0-\xdf][\x80-\xbf])|([\xe0-\xef][\x80-\xbf]{2})|([\xf0-\xf7][\x80-\xbf]{3})/g,function(r,n,e,t){var i=r.charCodeAt(0),o=r.charCodeAt(1),f=r.length>2&&r.charCodeAt(2),u=r.length>3&&r.charCodeAt(3);return n?String.fromCharCode((31&i)<<6|63&o):e?String.fromCharCode((15&i)<<12|(63&o)<<6|63&f):t?String.fromCharCode((7&i)<<18|(63&o)<<12|(63&f)<<6|63&u):void 0})}(r):r}function l(r,n){return r in o?o[r].dec(n):(console.warn("MsgPack Warning: Failed to decode unregistered extension type "+r),null)}function h(){var r,n=u.ui8();if(0==(128&n))return n;if(224==(224&n))return-256|n;if(128==(240&n))return a(15&n);if(144==(240&n))return c(15&n);if(160==(224&n))return g(u.buf(31&n));switch(n){case 193:case 192:return null;case 194:return!1;case 195:return!0;case 196:return d(u.buf(u.ui8()));case 197:return d(u.buf(u.ui16()));case 198:return d(u.buf(u.ui32()));case 199:return r=u.ui8(),l(u.i8(),u.buf(r));case 200:return r=u.ui16(),l(u.i8(),u.buf(r));case 201:return r=u.ui32(),l(u.i8(),u.buf(r));case 202:return u.f32();case 203:return u.f64();case 204:return u.ui8();case 205:return u.ui16();case 206:return u.ui32();case 207:return u.ui64(f);case 208:return u.i8();case 209:return u.i16();case 210:return u.i32();case 211:return u.i64(f);case 212:return l(u.i8(),u.buf(1));case 213:return l(u.i8(),u.buf(2));case 214:return l(u.i8(),u.buf(4));case 215:return l(u.i8(),u.buf(8));case 216:return l(u.i8(),u.buf(16));case 217:return g(u.buf(u.ui8()));case 218:return g(u.buf(u.ui16()));case 219:return g(u.buf(u.ui32()));case 220:return c(u.ui16());case 221:return c(u.ui32());case 222:return a(u.ui16());case 223:return a(u.ui32())}throw new Error("MsgPack Error: Somehow encountered unknown byte code: "+n)}var y=h();if(!u.eof())throw new Error("MsgPack Error: Trying to decode more data than expected");return y},e.decode.defaults=function(r){if("string"==typeof r){if(r in s)return s[r];throw new Error("Unknown decode setting name: "+r)}if("object"!=typeof r)throw new Error("Could not set decode defaults with non-object setting input");if("binaryType"in r){if("string"!=typeof r.binaryType||!(r.binaryType in f))throw new Error("MsgPack Error: Invalid decode default value for binaryType");s.binaryType=r.binaryType}if("stringEncoding"in r){if("string"!=typeof r.stringEncoding||!(r.stringEncoding in u))throw new Error("MsgPack Error: Invalid decode default value for stringEncoding");s.stringEncoding=r.stringEncoding}if("bigInts"in r){if("boolean"!=typeof r.bigInts)throw new Error("MsgPack Error: Non-boolean decode default value for bigInts");s.bigInts=r.bigInts}},function(r){var n=r.type,e=r.varType||"object",t={enc:r.encode,dec:r.decode,ty:n};if(n>=0)throw new Error("MsgPack Error: Failed to add core extension; type code must be negative: "+ +n);(i[e]=i[e]||[]).push(t),o[n]=t}({type:-1,encode:function(r){if("[object Date]"!==Object.prototype.toString.call(r)||"function"!=typeof r.getTime)return!1;var n=r.getTime();if("number"!=typeof n)return!1;var e=n/1e3|0,t=1e6*(n-1e3*e),i=new j;return e<0||e>17179869183?i.i32(t).i64(e):t||e>4294967295?i.i32(4*t+(e/4294967296&3)).i32(e):i.i32(e),i.data()},decode:function(r){var n=new Date,e=new P(r),t=0,i=0;switch(r.length){case 4:t=e.ui32();break;case 8:i=e.ui32(),t=e.ui32()+4294967296*(3&i),i=k(i/4);break;case 12:i=e.ui32(),t=e.i64();break;default:throw new Error("MsgPack Error: Failed to decode Timestamp: Unknown timestamp encoding version with length "+r.length)}return n.setTime(1e3*t+i/1e6),n}}),"object"==typeof r&&e.encode.defaults(r),"object"==typeof n&&e.decode.defaults(n)}var I=new B;B.extend=I.extend,B.encode=I.encode,B.decode=I.decode,"object"==typeof module&&"object"==typeof module.exports?module.exports=B:r.msgpack=B}("undefined"!=typeof window?window:this);