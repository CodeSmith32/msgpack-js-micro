/// micro msgpack library
/// version 1.1.4
/// by Codesmith32
/// https://github.com/CodeSmith32/msgpack-js-micro

!function(r){"use strict";var e={},n="function"==typeof r.Uint8Array&&"function"==typeof r.ArrayBuffer,t="function"==typeof r.Buffer,i="function"==typeof r.BigInt,o=r.Uint8Array||function(){},u=r.ArrayBuffer||function(){},f=r.DataView||function(){},a=r.Buffer||function(){},c=r.BigInt||function(){},s=r.BigInt?{bits:r.BigInt(32),mask:r.BigInt(4294967295)}:{};try{"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/function\s*([^\s(]*)/)[1]}})}catch(r){Function.prototype.name=""}function d(r){if("string"==typeof r)return r;if(t&&r instanceof a)return r.toString("latin1");if(r&&r.constructor&&!(r instanceof o)&&r.constructor.name.match(/^(Big)?(Uint|Int|Float)(8|16|32|64)(Clamped)?Array$/)&&(r=new o(r.buffer,r.byteOffset,r.byteLength)),r instanceof u&&(r=new o(r)),r instanceof f&&(r=new o(r.buffer)),r instanceof o){for(var e="",n=0;n<r.length;n+=128)e+=String.fromCharCode.apply(null,r.subarray(n,n+128));return e}throw new Error("MsgPack Error: Cannot normalize to string for value of type "+typeof r+(r?" "+r.constructor.name:""))}function g(r,e){switch(e){case"buffer":if(t)return a.from(r,"latin1");case"arraybuffer":return function(r){if(!n)throw new Error("MsgPack Error: Requesting ArrayBuffer return in environment that doesn't support TypedArrays or ArrayBuffers");for(var e=new o(r.length),t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer}(r)}return r}Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),[].indexOf||(Array.prototype.indexOf=function(r,e){var n=this.length>>>0;for((e=0|+e||0)<0&&(e+=n);e<n;e++)if(e in this&&this[e]===r)return e;return-1});var h=Math.log,l=h(2),b=h(10),y=(Math.log10,Math.log2||function(r){return h(r)/l}),p=Math.abs,w=Math.floor,m=Math.round,v=Math.pow,E=v(2,149),x=v(2,1022),C=v(2,52);function k(r){var e=this;if(!(e instanceof k))throw new Error("Bad instantiation of object msgpack::BinReader");var n=0;function t(e){if(n+e>r.length)throw new Error("MsgPack Error: Unexpected end of data")}function i(e){return 255&r.charCodeAt(n++)}r=d(r),e.ui8=function(){return t(1),i()},e.i8=function(){t(1);var r=i();return 128&r&&(r|=-256),r},e.ui16=function(){return t(2),256*i()+i()},e.i16=function(){t(2);var r=256*i()+i();return 32768&r&&(r|=-65536),r},e.ui32=function(){return t(4),16777216*i()+65536*i()+256*i()+i()>>>0},e.i32=function(){return t(4),16777216*i()+65536*i()+256*i()+i()>>0},e.ui64=function(r){return r?(c(e.ui32())<<s.bits)+c(e.ui32()):4294967296*e.ui32()+e.ui32()},e.i64=function(r){return(r?c(e.i32())<<s.bits:4294967296*e.i32())+(r?c(e.ui32()):e.ui32())},e.f32=function(){t(4);var r=16777216*i()+65536*i()+256*i()+i(),e=!!(2147483648&r),n=r>>23&255,o=8388607&r;return 255===n?0===o?e?-1/0:1/0:NaN:0===n?o/E:(o+=8388608)*(e?-1:1)*v(2,n-127-23)},e.f64=function(){t(8);var r=16777216*i()+65536*i()+256*i()+i(),e=!!(2147483648&r),n=r>>20&2047,o=4294967296*(1048575&r)+(16777216*i()+65536*i()+256*i()+i());return 2047===n?0===o?e?-1/0:1/0:NaN:0===n?o/x/C:(o/C+1)*(e?-1:1)*v(2,n-1023)},e.buf=function(e){t(e);var i=r.slice(n,n+e);return n+=e,i},e.eof=function(){return n>=r.length}}function A(){var r=this;if(!(r instanceof A))throw new Error("Bad instantiation of object msgpack::BinWriter");var e="";function n(r){e+=String.fromCharCode(255&r)}r.i8=function(e){return n(e),r},r.i16=function(e){return n(e>>8),n(e),r},r.i32=function(e){return n(e>>24),n(e>>16),n(e>>8),n(e),r},r.i64=function(e){return r.i32(w(e/4294967296)).i32(e),r},r.f32=function(t){if(isNaN(t))return e+="À\0\0",r;if(t===1/0)return e+="\0\0",r;if(t===-1/0)return e+="ÿ\0\0",r;if(0===t)return e+="\0\0\0\0",r;var i=t<0,o=i?-t:t,u=w(y(o)),f=m(o*v(2,23-u))-8388608;return u+=127,f>8388607&&(u++,f&=8388607),u>254?(e+=i?"ÿ\0\0":"\0\0",r):(u<=0&&(u=0,f=m(o*E)),n(i<<7|u>>1&127),n(u<<7|f>>16&127),n(f>>8),n(f),r)},r.f64=function(t){if(isNaN(t))return e+="ø\0\0\0\0\0\0",r;if(t===1/0)return e+="ð\0\0\0\0\0\0",r;if(t===-1/0)return e+="ÿð\0\0\0\0\0\0",r;if(0===t)return e+="\0\0\0\0\0\0\0\0",r;var i=t<0,o=i?-t:t,u=w(y(o)),f=m(u>0?o*v(2,52-u):o*v(2,52)*v(2,-u))-4503599627370496;return u+=1023,f>0x80000000000000&&(u++,f-=0x80000000000000),u>2046?(e+=i?"ÿð\0\0\0\0\0\0":"ð\0\0\0\0\0\0",r):(u<=0&&(u=0,f=m(o*x*C)),n(i<<7|u>>4&127),n(u<<4|f/281474976710656&15),n(f/1099511627776),n(f/4294967296),n(f/16777216),n(f/65536),n(f/256),n(f),r)},r.buf=function(n){return e+=n,r},r.data=function(){return e}}var M={},P={};e.extend=function(r){var e=r.type,n=r.varType||"object",t=r.encode,i=r.decode,o={enc:t,dec:i,ty:e};if("number"!=typeof e||e<0||e>127)throw new Error("MsgPack Error: Failed to add extension with type code: "+typeof e+" "+ +e);if("function"!=typeof t)throw new Error("MsgPack Error: Failed to add extension; missing 'encode' function");if("function"!=typeof i)throw new Error("MsgPack Error: Failed to add extension; missing 'decode' function");if(e in P)throw new Error("MsgPack Error: Failed to register extension with code "+e+"; extension code already in use");(M[n]=M[n]||[]).push(o),P[e]=o},e.encode=function(r,e){var n="returnType"in(e=e||{})?e.returnType.toLowerCase():"string",t="stringEncoding"in e?e.stringEncoding.toLowerCase():"utf8",i=new A,o=[];return function r(e){var n=typeof e;if(n in M)for(var u,f,a=0;a<M[n].length;a++)if(!1!==(f=(u=M[n][a]).enc(e))){if(null==f)throw new Error("MsgPack Error: Extension code "+u.ty+" failed to return a valid buffer");return 1===(f=d(f)).length?i.i8(212):2===f.length?i.i8(213):4===f.length?i.i8(214):8===f.length?i.i8(215):16===f.length?i.i8(216):f.length<256?i.i8(199).i8(f.length):f.length<65536?i.i8(200).i16(f.length):i.i8(201).i32(f.length),void i.i8(u.ty).buf(f)}if("bigint"===n&&e<=4294967295&&(e=Number(e),n="number"),e&&e.constructor.name.match(/^(Big)?(Uint|Int|Float)(8|16|32|64)(Clamped)?Array$|^(ArrayBuffer|Buffer|DataView)$/))(e=d(e)).length<256?i.i8(196).i8(e.length).buf(e):e.length<65536?i.i8(197).i16(e.length).buf(e):i.i8(198).i32(e.length).buf(e);else if(null==e)i.i8(192);else if("boolean"===n)i.i8(194+e);else if("number"===n)w(e)===e?e<0?e>=-32?i.i8(e):e>=-128?i.i8(208).i8(e):e>=-32768?i.i8(209).i16(e):e>=-2147483648?i.i8(210).i32(e):i.i8(211).i64(e):e<128?i.i8(e):e<256?i.i8(204).i8(e):e<65536?i.i8(205).i16(e):e<=4294967295?i.i8(206).i32(e):i.i8(207).i64(e):function(r){r=p(r);var e=y(r);return e<-120||e>120||(r/=v(2,w(e)-23))!==w(r)}(e)?i.i8(203).f64(e):i.i8(202).f32(e);else if("bigint"===n)i.i8(e<0?211:207),i.i32(Number(e>>s.bits)).i32(Number(e&s.mask));else if("string"===n)e="utf8"===t?e.replace(/[\x80-\uffff]/g,function(r){return(r=r.charCodeAt())<2048?String.fromCharCode(192|r>>6,128|63&r):String.fromCharCode(224|r>>12&15,128|r>>6&63,128|63&r)}):function(r){return r.replace(/[\u0100-\uffff]/g,function(r){return String.fromCharCode(255&r.charCodeAt(0))})}(e),e.length<32?i.i8(160|e.length).buf(e):e.length<256?i.i8(217).i8(e.length).buf(e):e.length<65536?i.i8(218).i16(e.length).buf(e):i.i8(219).i32(e.length).buf(e);else{if("object"!==n)throw new Error("MsgPack Error: Failed to encode element of type "+n);if(o.indexOf(e)>-1)throw new Error("MsgPack Error: Failed to encode object with recursive properties");if(o.push(e),Array.isArray(e))for(e.length<16?i.i8(144|e.length):e.length<65536?i.i8(220).i16(e.length):i.i8(221).i32(e.length),a=0;a<e.length;a++)r(e[a]);else{var c=0;for(var a in e)void 0!==e[a]&&c++;for(var a in c<16?i.i8(128|c):c<65536?i.i8(222).i16(c):i.i8(223).i32(c),e)if(void 0!==e[a]&&(r(a),r(e[a]),--c<0))throw new Error("MsgPack Error: Failed to encode malformed Proxy object");if(c)throw new Error("MsgPack Error: Failed to encode malformed Proxy object")}o.pop()}}(r),g(i.data(),n)},e.decode=function(r,e){var n="binaryType"in(e=e||{})?e.binaryType.toLowerCase():"string",t="stringEncoding"in e?e.stringEncoding.toLowerCase():"utf8",o=i&&!!e.bigInts,u=new k(r);function f(r){for(var e={},n=0;n<r;n++)e[h()]=h();return e}function a(r){for(var e=[],n=0;n<r;n++)e.push(h());return e}function c(r){return g(r,n)}function s(r){return"utf8"===t?function(r){return r.replace(/([\xc0-\xdf][\x80-\xbf])|([\xe0-\xef][\x80-\xbf]{2})|([\xf0-\xf7][\x80-\xbf]{3})/g,function(r,e,n,t){var i=r.charCodeAt(0),o=r.charCodeAt(1),u=r.length>2&&r.charCodeAt(2),f=r.length>3&&r.charCodeAt(3);return e?String.fromCharCode((31&i)<<6|63&o):n?String.fromCharCode((15&i)<<12|(63&o)<<6|63&u):t?String.fromCharCode((7&i)<<18|(63&o)<<12|(63&u)<<6|63&f):void 0})}(r):r}function d(r,e){return r in P?P[r].dec(e):(console.warn("MsgPack Warning: Failed to decode unregistered extension type "+r),null)}function h(){var r,e=u.ui8();if(0==(128&e))return e;if(224==(224&e))return-256|e;if(128==(240&e))return f(15&e);if(144==(240&e))return a(15&e);if(160==(224&e))return s(u.buf(31&e));switch(e){case 193:case 192:return null;case 194:return!1;case 195:return!0;case 196:return c(u.buf(u.ui8()));case 197:return c(u.buf(u.ui16()));case 198:return c(u.buf(u.ui32()));case 199:return r=u.ui8(),d(u.i8(),u.buf(r));case 200:return r=u.ui16(),d(u.i8(),u.buf(r));case 201:return r=u.ui32(),d(u.i8(),u.buf(r));case 202:return u.f32();case 203:return u.f64();case 204:return u.ui8();case 205:return u.ui16();case 206:return u.ui32();case 207:return u.ui64(o);case 208:return u.i8();case 209:return u.i16();case 210:return u.i32();case 211:return u.i64(o);case 212:return d(u.i8(),u.buf(1));case 213:return d(u.i8(),u.buf(2));case 214:return d(u.i8(),u.buf(4));case 215:return d(u.i8(),u.buf(8));case 216:return d(u.i8(),u.buf(16));case 217:return s(u.buf(u.ui8()));case 218:return s(u.buf(u.ui16()));case 219:return s(u.buf(u.ui32()));case 220:return a(u.ui16());case 221:return a(u.ui32());case 222:return f(u.ui16());case 223:return f(u.ui32())}throw new Error("MsgPack Error: Somehow encountered unknown byte code: "+e)}var l=h();if(!u.eof())throw new Error("MsgPack Error: Trying to decode more data than expected");return l},function(r){var e=r.type,n=r.varType||"object",t={enc:r.encode,dec:r.decode,ty:e};if(e>=0)throw new Error("MsgPack Error: Failed to add core extension; type code must be negative: "+ +e);(M[n]=M[n]||[]).push(t),P[e]=t}({type:-1,encode:function(r){if("[object Date]"!==Object.prototype.toString.call(r)||"function"!=typeof r.getTime)return!1;var e=r.getTime();if("number"!=typeof e)return!1;var n=e/1e3|0,t=1e6*(e-1e3*n),i=new A;return n<0||n>17179869183?i.i32(t).i64(n):t||n>4294967295?i.i32(4*t+(n/4294967296&3)).i32(n):i.i32(n),i.data()},decode:function(r){var e=new Date,n=new k(r),t=0,i=0;switch(r.length){case 4:t=n.ui32();break;case 8:i=n.ui32(),t=n.ui32()+4294967296*(3&i),i=w(i/4);break;case 12:i=n.ui32(),t=n.i64();break;default:throw new Error("MsgPack Error: Failed to decode Timestamp: Unknown timestamp encoding version with length "+r.length)}return e.setTime(1e3*t+i/1e6),e}}),"object"==typeof module&&"object"==typeof module.exports?module.exports=e:r.msgpack=e}("undefined"!=typeof window?window:this);